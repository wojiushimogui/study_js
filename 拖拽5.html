	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
	<title>无标题文档</title>
	<style>
	#div1 {width:200px;height:200px;background:red;display:block;position:absolute;}
	</style>
	
	<script>
	window.onload=function()
	{
		new Drag('div1');
	};
	
	function Drag(id)
	{
		_this=this;
		this.oDiv = document.getElementById(id);
		this.disX=0;
		this.disY=0;
		
		this.oDiv.onmousedown=function(ev)
		{
			_this.fnDown(ev);
		};
	};
	Drag.prototype.fnDown=function (ev)
	{
		_this=this;
		var oEvent = ev||event;
		this.disX = oEvent.clientX - this.oDiv.offsetLeft;
		this.disY = oEvent.clientY - this.oDiv.offsetTop;
		document.onmousemove=function(ev)
		{
			_this.fnMove(ev);
		};
		document.onmouseup=function(ev)
		{
			_this.fnUp(ev);
		};
		
	};
	Drag.prototype.fnMove=function (ev)
	{
		var oEvent = ev||event;
		var l=oEvent.clientX - this.disX;
		var t=oEvent.clientY - this.disY;
		
		this.oDiv.style.left=l+'px';
		this.oDiv.style.top=t+'px';
	};
	Drag.prototype.fnUp=function ()
	{
		document.onmousemove=null;
		document.onmouseup=null;
	};
	</script>
	</head>
	
	<body>
	<div id="div1">
	
	</div>
	</body>
	</html>
